# BAAS-Project

### 简介

BAAS（Blue Archive Auto Sensei），是为了完成“使用脚本完成碧蓝档案日常任务，甚至在总力战等场合帮助老师按照已有的轴全自动凹分”这个目标而设立的软件项目。
项目不仅包括最终可以使用的脚本执行器客户端，也包括为了达成此目标而搭建的周边辅助措施，包括且不限于在线的YOLO训练数据共享和标注站、分布式的YOLO训练框架等。

### 组成

1. autoften

**对局内角色识别、定位，脚本解释和执行器**

谐音“自动凹分”，最终可以使用的脚本执行器客户端。

其通过YOLO作为关卡内识别角色和敌人的主要手段，辅以传统OpenCV和位置记忆、惯性算法等措施，实现在局内大部分时间、甚至是角色被特效遮挡时，可以做到识别和定位各个角色和需要攻击的敌人的位置，可以在任何需要的时间点逐帧级精确释放技能和进行其他操作。

此外，定义了一套BA局内条件判断和操作的脚本语法，以及与此语法对应的脚本解释器。用户可以将自己摸出的轴编写至此脚本语法上，或使用其他Sensei分享的脚本，即可全自动执行。脚本会按脚本规则反复执行，直到暴击/安定等达到期望状态。享受从凹分大牢中解脱的快感吧！

注：此部分作为整个项目的最终产物，如果用户希望，可以是完全离线运行的。

2. bincubator

**自建平台，提供数据标注、任务分配、训练监控、数据可视化等能力**

bin是“binary”（二进制数据）的缩写，而incubator是孵化器的意思。这是一个自建的数据共享和标注平台，集群力而采集、标注，最终可以使YOLO的识别效果不断进步，从而达到更加稳定的状态，依仗各位Sensei的力量，将这个项目逐步孵化至成熟。

为展示和感谢各位Sensei提供的帮助，此平台会以排行榜形式对数据上传、标注、算力贡献等数据进行展示。

此外，这个平台还提供了对`minerholder`项目所提供的分布式训练能力的管理功能，可以向所有终端分配训练任务、监控训练进度和相关数据。

在后期，此平台还可以作为脚本的上传和分享的平台/社区，各位老师可以在此共享、交流总力战轴和攻略心得。

平台包括的功能：
    - 游戏对局数据上传共享（包括视频/图片）
    - YOLO训练数据标注
    - 训练进度公开展示
    - 分布式训练监控、数据可视化
    - 自动训练任务分配
    - 数据上传、标注、算力贡献等数据的排行榜展示
    - （后期的）脚本上传和分享平台/社区

3. minerholder

**分布式的训练机器管理程序。可全自动安装训练所需相关运行环境，监听并接收训练请求，管理训练任务、启动并监控训练进程**

可翻译为“矿工主”或“矿场主”。由于YOLO训练数据量逐渐变大时，单纯的一两张消费级显卡可能难以独自承担训练任务。所以利用这个分布式训练框架，可以利用每一位愿意贡献自己算力的Sensei的机器，分担训练负荷。由于挖矿时代经常把显卡叫做矿工，训练占据显卡算力的感觉某种程度上也有些神似，因此得名。（我们的训练绝对不会像挖矿一样透支显卡寿命！）

设计上，每个`minerholder`作为训练框架的客户端，都会与服务器进行通信，接受服务器统筹下发的训练任务。训练时，`minerholder`会向服务器实时上传训练进度、性能消耗等监控数据，以保证训练任务的正常推进。而对整个分布式训练框架而言，只要仍有可用的算力节点，就会7x24小时不断训练。同时，新机器的加入可以及时扩充整个系统的算力，以推进训练进度，而贡献算力的Sensei也可以无需担心，随时下线自己的机器。在理想情况下，下线只会降低整个系统的总算力，而基本不会影响到训练进度。同时，来自`bincubator`的新标注数据也会随时投喂至训练中，为整个模型提供更全面更新的保障。